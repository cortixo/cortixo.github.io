<html>
  <head>
    <title>painer</title>
  </head>
  <body>
    <h1>ANN Painter</h1>
    
    <img id="img_" width="220" height="277" src="https://pmcvariety.files.wordpress.com/2018/04/twitter-logo.jpg" style="display:none;">
    
    <canvas id="input_img" width=300px height=300px style="float:left;border:1px grey solid;"></canvas>
    <canvas id="outputDraw" width=300px height=300px style="float:left;border:1px grey solid;"></canvas>
    <br>
    <canvas id="cortixoUI" width=300px height=300px style="border:1px grey solid;"></canvas>
    <script type="application/javascript" src="https://cortixo.github.io/src/ai.js"></script>
    <br>
    <h4>Iterations: <span id="iters"></span></h4>
    
    <script>
      
      var iters = 0;
      
      function iteration() {
        
        alert(cortixo.output())
        
        iters += 1; document.getElementById("iters").innerHTML = iters;
        
        try {
        var xpos_d = Math.round((Math.random*299))/300;
        var ypos_d = Math.round((Math.random*299))/300;
        
        //var cimgr = document.getElementById("input_img");
        //var ctximgr = cimgr.getContext("2d");
        
        var rgb_at_pos = [0,0,0]; if (xpos_d > 150) {rgb_at_pos = [0,0,1]}
        
        cortixo.setInput([xpos_d,ypos_d]);
        cortixo.expectedOutput([rgb_at_pos[0],rgb_at_pos[1],rgb_at_pos[2]]);
        cortixo.train();
        
        var cout = document.getElementById("outputDraw");
        var ctxout = cout.getContext("2d");} catch(err) {alert(err);}
        
        try {
          ctxout.fillStyle = "rgb(" + cortixo.output[0]*255 + "," + cortixo.output[1]*255 + "," + cortixo.output[2]*255 + ")";
          ctxout.beginPath();
          ctxout.rect(xpos_d,ypos_d,3,3);
          ctxout.fill();
          ctxout.closePath();
        } catch(err) {}
        
        window.requestAnimationFrame(iteration);
        
      }
      
      window.onload = function() {
        cortixo.reset();
        cortixo.learnRate(0.1);
        
        cortixo.inputLayer(2);
        cortixo.hiddenLayer(20);
        cortixo.hiddenLayer(20);
        cortixo.outputLayer(3);
        
        alert(cortixo.output())
        
        var cimg_ = document.getElementById("input_img");
        var ctximg_ = cimg_.getContext("2d");
        
        var img = document.getElementById("img_");
        ctximg_.drawImage(img, 0, 0,300, 300);
        
        window.requestAnimationFrame(iteration);
      }
      
    </script>
  </body>
</html>
